<html>
  <head>
    <script src="papaparse.min.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
 


      google.load("visualization", "1", {packages:["geochart"]});
      google.setOnLoadCallback(drawRegionsMap);

      var dataCSV = null;

      var options = {};

      var chart = null; 
      

      // consol.log(dataCSV["data"]);

      var content;



      function processFile() {
          console.log(content);
      }

      function ChangeTime(value)
      {
        
        data = google.visualization.arrayToDataTable([
          ['region', 'Popularity',],
          ['BRA', Math.floor(Math.random()*1000) ],
          ['United States', Math.floor(Math.random()*1000) ],
          ['Brazil', Math.floor(Math.random()*1000) ],
          ['Canada', Math.floor(Math.random()*1000) ],
          ['France', Math.floor(Math.random()*1000) ],
          ['RU', Math.floor(Math.random()*1000) ]
        ]);
        chart.draw(data, options);
      }


      function drawRegionsMap() {
        chart = new google.visualization.GeoChart(document.getElementById('regions_div'));
        setInterval(ChangeTime, 500);
        
      }
      if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
      }
      else
      {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
      xmlhttp.open("GET","data.csv",true);
      xmlhttp.send();
      xmlDoc=xmlhttp.responseText;    

      //parse the csv
      data = Papa.parse(xmlDoc);
    </script>
  </head>
  <body>
        <div id="regions_div" style="width: 900px; height: 500px;"></div>
  </body>
</html>
